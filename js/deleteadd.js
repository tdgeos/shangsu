(function(){var g="blank",h="display",k="tool-operate",d="o-item-con",m="content",o="mouseout",n="mouseover",e="fail",c=null,b=false;if(T.browser.ie)try{document.execCommand("BackgroundImageCache",b,true)}catch(p){}var f=T.event,a=T.dom,i=T.cookie,l=T.json,q=c,j=function(i,h,g){var b="</p></div>",f=document.createElement("div"),d=c;if(g==="suc")f.innerHTML='<div class="suctooltip tooltip"><div class="statustip"></div><p><span>\u6dfb\u52a0\u6210\u529f</span></p><p style="top:33px;">'+h+b;else if(g===e)f.innerHTML='<div class="failtooltip tooltip"><div class="statustip" style="background-position:-248px -409px"></div><p><span>\u5931\u8d25</span></p><p style="top:33px;">'+h+b;d=f.firstChild;i.appendChild(d);window.setTimeout(function(){a.remove(d);d=c},1e3)};f.on("head",n,function(c){var c=f.get(c),b=c.target;if(b)b.nodeName.toLowerCase()==="a"&&a.addClass(b,"select")});f.on("head",o,function(c){var c=T.event.get(c),b=c.target;if(b)b.nodeName.toLowerCase()==="a"&&a.removeClass(b,"select")});f.on(m,n,function(i){var i=f.get(i),b=i.target,j=i.relatedTarget||i.fromElement||c,e=T.dom.hasClass(b,d)?b:T.dom.getAncestorByClass(b,d);e&&(!j||j!=e&&!T.dom.contains(e,j))&&a.addClass(e,"show-bg");if(b)if(a.hasClass(b,k))a.setStyle(b.firstChild,h,"block");else a.hasClass(b,"item-search-but")&&a.addClass(b,g)});f.on(m,o,function(f){var f=T.event.get(f),b=f.target,i=f.relatedTarget||f.toElement||c,e=a.hasClass(b,d)?b:a.getAncestorByClass(b,d);e&&(!i||i!=e&&!a.contains(e,i))&&a.removeClass(e,"show-bg");if(b)if(a.hasClass(b,k))a.setStyle(b.firstChild,h,"none");else a.hasClass(b,g)&&a.removeClass(b,g)});f.on(m,"click",function(B){var u="\u6211\u7684\u5de5\u5177\u7bb1\u5df2\u6709\u6b64\u5de5\u5177!",f="hao123_toolkit",r="toolkit-id",q="tool-id",B=T.event.get(B),m=B.target;if(m)if(a.hasClass(m,"item-operate-rem")){var k=m.parentNode,o=a.getAttr(k,q),g=a.getAttr(k,r);if(o&&g){var y=i.get(f),n;if(!y)return b;else n=l.parse(y);var s=n[g]=n[g]||[],v=s.length;if(!v)return b;for(var p=0;p<v;p++)if(s[p]["id"]===o){s.splice(p,1);a.remove(k);for(var w in n){if(!n[w].length)continue;i.set(f,l.stringify(n),{expires:3.1536e10});return true}i.remove(f);return true}return b}}else if(a.hasClass(m,"item-operate-add")){var k=m.parentNode,o=a.getAttr(k,q),g=a.getAttr(k,r);a.setStyle(m.firstChild,h,"none");if(o&&g){var n=l.parse(i.get(f)||"{}"),s=n[g]=n[g]||[],v=s.length,A=OTOOLKITSETNODEL[g]||[];ahash={};for(var w=0,C=A.length;w<C;w++)if(A[w]===o){j(k,u,e);return b}for(var p=0;p<v;p++)if(s[p]["id"]===o){j(k,u,e);return b}if(v>11){j(k,"\u6211\u7684\u5de5\u5177\u7bb1\u5df2\u8fbe\u5230\u6dfb\u52a0\u4e0a\u9650!",e);return b}s.push({id:o});i.set(f,l.stringify(n),{expires:3.1536e10});if(i.get(f))j(k,"\u5df2\u6dfb\u52a0\u5230\u6211\u7684\u5de5\u5177\u7bb1!","suc");else j(k,"cookie\u5df2\u7ecf\u88ab\u7981\u7528,\u529f\u80fd\u65e0\u6cd5\u6b63\u5e38\u4f7f\u7528",e)}return b}else if(m.type!="text"){var x=a.hasClass(m,d)?m:a.getAncestorByClass(m,d),t=c,z="",o;if(!x)return;o=a.getAttr(x,q);g=a.getAttr(x,r);if(o&&g){t=OALLTOOLKITSET[g]||{};t=t[o];if(t){z=encodeURIComponent(t.title);UserTrack.send({leve:"2",page:pageId,type:"click",tit:z},"http://www.hao123.com/images/track.gif")}}}})})()